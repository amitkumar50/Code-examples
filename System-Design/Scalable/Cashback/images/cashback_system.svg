<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1653px" preserveAspectRatio="none" style="width:2149px;height:1653px;background:#FFFFFF;" version="1.1" viewBox="0 0 2149 1653" width="2149px" zoomAndPan="magnify"><defs/><g><rect fill="#D3D3D3" height="1641.2578" style="stroke:#181818;stroke-width:0.5;" width="160" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60" x="51" y="19.4951">Customer</text><rect fill="#E0FFFF" height="1641.2578" style="stroke:#181818;stroke-width:0.5;" width="509.5" x="331.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57" x="557.75" y="19.4951">Common</text><rect fill="#ADD8E6" height="1641.2578" style="stroke:#181818;stroke-width:0.5;" width="722" x="853" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94" x="1167" y="19.4951">Business Logic</text><rect fill="#90EE90" height="1641.2578" style="stroke:#181818;stroke-width:0.5;" width="432" x="1577" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="60" x="1763" y="19.4951">DataBase</text><rect fill="#87CEFA" height="1641.2578" style="stroke:#181818;stroke-width:0.5;" width="132" x="2011" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119" x="2017.5" y="19.4951">Payment_Gateway</text><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="22" x2="22" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="137" x2="137" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="386.5" x2="386.5" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="502.5" x2="502.5" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="618.5" x2="618.5" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="786" x2="786" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="967" x2="967" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1127.5" x2="1127.5" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1317" x2="1317" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1492" x2="1492" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1639" x2="1639" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1743" x2="1743" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1841" x2="1841" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1954" x2="1954" y1="103.9609" y2="1566.6484"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2077" x2="2077" y1="103.9609" y2="1566.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="100.8848">User</text><ellipse cx="22.5" cy="34.8516" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,42.8516 L22.5,69.8516 M9.5,50.8516 L35.5,50.8516 M22.5,69.8516 L9.5,84.8516 M22.5,69.8516 L35.5,84.8516 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="29" x="5" y="1580.1816">User</text><ellipse cx="22.5" cy="1591.7578" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M22.5,1599.7578 L22.5,1626.7578 M9.5,1607.7578 L35.5,1607.7578 M22.5,1626.7578 L9.5,1641.7578 M22.5,1626.7578 L35.5,1641.7578 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="118" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="125" y="92.8848">App</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="39" x="118" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="25" x="125" y="1587.1816">App</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="335.5" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="342.5" y="92.8848">LoadBalancer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="335.5" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="342.5" y="1587.1816">LoadBalancer</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="457.5" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="464.5" y="92.8848">APIGateway</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="90" x="457.5" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76" x="464.5" y="1587.1816">APIGateway</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="583.5" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="590.5" y="92.8848">Validator</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="70" x="583.5" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="590.5" y="1587.1816">Validator</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="736" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="743" y="92.8848">Kafka_Queue</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="736" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="743" y="1587.1816">Kafka_Queue</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="857" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="864" y="92.8848">Transaction_Processing_System</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="857" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="864" y="1587.1816">Transaction_Processing_System</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="1102.5" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1109.5" y="92.8848">Kafka</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="1102.5" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="1109.5" y="1587.1816">Kafka</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="1231" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="1238" y="92.8848">Cashback_Rules_Engine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="173" x="1231" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="1238" y="1587.1816">Cashback_Rules_Engine</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="1414" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1421" y="92.8848">AnalyticsAndReporting</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="1414" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="1421" y="1587.1816">AnalyticsAndReporting</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1581" y="100.8848">TransactionTable</text><path d="M1621.5,50.3516 C1621.5,40.3516 1639.5,40.3516 1639.5,40.3516 C1639.5,40.3516 1657.5,40.3516 1657.5,50.3516 L1657.5,76.3516 C1657.5,86.3516 1639.5,86.3516 1639.5,86.3516 C1639.5,86.3516 1621.5,86.3516 1621.5,76.3516 L1621.5,50.3516 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1621.5,50.3516 C1621.5,60.3516 1639.5,60.3516 1639.5,60.3516 C1639.5,60.3516 1657.5,60.3516 1657.5,50.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111" x="1581" y="1580.1816">TransactionTable</text><path d="M1621.5,1593.2578 C1621.5,1583.2578 1639.5,1583.2578 1639.5,1583.2578 C1639.5,1583.2578 1657.5,1583.2578 1657.5,1593.2578 L1657.5,1619.2578 C1657.5,1629.2578 1639.5,1629.2578 1639.5,1629.2578 C1639.5,1629.2578 1621.5,1629.2578 1621.5,1619.2578 L1621.5,1593.2578 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1621.5,1593.2578 C1621.5,1603.2578 1639.5,1603.2578 1639.5,1603.2578 C1639.5,1603.2578 1657.5,1603.2578 1657.5,1593.2578 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="1708" y="100.8848">UserTable</text><path d="M1725.5,50.3516 C1725.5,40.3516 1743.5,40.3516 1743.5,40.3516 C1743.5,40.3516 1761.5,40.3516 1761.5,50.3516 L1761.5,76.3516 C1761.5,86.3516 1743.5,86.3516 1743.5,86.3516 C1743.5,86.3516 1725.5,86.3516 1725.5,76.3516 L1725.5,50.3516 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1725.5,50.3516 C1725.5,60.3516 1743.5,60.3516 1743.5,60.3516 C1743.5,60.3516 1761.5,60.3516 1761.5,50.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="1708" y="1580.1816">UserTable</text><path d="M1725.5,1593.2578 C1725.5,1583.2578 1743.5,1583.2578 1743.5,1583.2578 C1743.5,1583.2578 1761.5,1583.2578 1761.5,1593.2578 L1761.5,1619.2578 C1761.5,1629.2578 1743.5,1629.2578 1743.5,1629.2578 C1743.5,1629.2578 1725.5,1629.2578 1725.5,1619.2578 L1725.5,1593.2578 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1725.5,1593.2578 C1725.5,1603.2578 1743.5,1603.2578 1743.5,1603.2578 C1743.5,1603.2578 1761.5,1603.2578 1761.5,1593.2578 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1789" y="100.8848">CashbackTable</text><path d="M1823.5,50.3516 C1823.5,40.3516 1841.5,40.3516 1841.5,40.3516 C1841.5,40.3516 1859.5,40.3516 1859.5,50.3516 L1859.5,76.3516 C1859.5,86.3516 1841.5,86.3516 1841.5,86.3516 C1841.5,86.3516 1823.5,86.3516 1823.5,76.3516 L1823.5,50.3516 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1823.5,50.3516 C1823.5,60.3516 1841.5,60.3516 1841.5,60.3516 C1841.5,60.3516 1859.5,60.3516 1859.5,50.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="1789" y="1580.1816">CashbackTable</text><path d="M1823.5,1593.2578 C1823.5,1583.2578 1841.5,1583.2578 1841.5,1583.2578 C1841.5,1583.2578 1859.5,1583.2578 1859.5,1593.2578 L1859.5,1619.2578 C1859.5,1629.2578 1841.5,1629.2578 1841.5,1629.2578 C1841.5,1629.2578 1823.5,1629.2578 1823.5,1619.2578 L1823.5,1593.2578 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1823.5,1593.2578 C1823.5,1603.2578 1841.5,1603.2578 1841.5,1603.2578 C1841.5,1603.2578 1859.5,1603.2578 1859.5,1593.2578 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1904" y="100.8848">MerchantTable</text><path d="M1936.5,50.3516 C1936.5,40.3516 1954.5,40.3516 1954.5,40.3516 C1954.5,40.3516 1972.5,40.3516 1972.5,50.3516 L1972.5,76.3516 C1972.5,86.3516 1954.5,86.3516 1954.5,86.3516 C1954.5,86.3516 1936.5,86.3516 1936.5,76.3516 L1936.5,50.3516 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1936.5,50.3516 C1936.5,60.3516 1954.5,60.3516 1954.5,60.3516 C1954.5,60.3516 1972.5,60.3516 1972.5,50.3516 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="1904" y="1580.1816">MerchantTable</text><path d="M1936.5,1593.2578 C1936.5,1583.2578 1954.5,1583.2578 1954.5,1583.2578 C1954.5,1583.2578 1972.5,1583.2578 1972.5,1593.2578 L1972.5,1619.2578 C1972.5,1629.2578 1954.5,1629.2578 1954.5,1629.2578 C1954.5,1629.2578 1936.5,1629.2578 1936.5,1619.2578 L1936.5,1593.2578 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1936.5,1593.2578 C1936.5,1603.2578 1954.5,1603.2578 1954.5,1603.2578 C1954.5,1603.2578 1972.5,1603.2578 1972.5,1593.2578 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="2015" y="71.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="2022" y="92.8848">PaymentGateway</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124" x="2015" y="1565.6484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="2022" y="1587.1816">PaymentGateway</text><polygon fill="#181818" points="125.5,132.3125,135.5,136.3125,125.5,140.3125,129.5,136.3125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="22.5" x2="131.5" y1="136.3125" y2="136.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="29.5" y="131.4561">Make Purchase</text><polygon fill="#181818" points="374.5,179.0156,384.5,183.0156,374.5,187.0156,378.5,183.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="137.5" x2="380.5" y1="183.0156" y2="183.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="144.5" y="161.8076">HTTPS(Transaction details</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="144.5" y="178.1592">(tid, product-id,amnt,payment method))</text><polygon fill="#181818" points="490.5,209.3672,500.5,213.3672,490.5,217.3672,494.5,213.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="386.5" x2="496.5" y1="213.3672" y2="213.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="393.5" y="208.5107">HTTPS(request)</text><path d="M427,226.3672 L427,301.3672 L577,301.3672 L577,236.3672 L567,226.3672 L427,226.3672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M567,226.3672 L567,236.3672 L577,236.3672 L567,226.3672 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="433" y="244.8623">Provides Rate Limiting</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="433" y="261.2139">Authentication</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="433" y="277.5654">Routing</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="433" y="293.917">Security Functions</text><polygon fill="#181818" points="606.5,325.125,616.5,329.125,606.5,333.125,610.5,329.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="502.5" x2="612.5" y1="329.125" y2="329.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="509.5" y="324.2686">HTTPS(request)</text><path d="M553,342.125 L553,401.125 L684,401.125 L684,352.125 L674,342.125 L553,342.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M674,342.125 L674,352.125 L684,352.125 L674,342.125 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="559" y="360.6201">Provides Validation</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="62" x="559" y="376.9717">Formatting</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="559" y="393.3232">Translation</text><polygon fill="#181818" points="774.5,424.5313,784.5,428.5313,774.5,432.5313,778.5,428.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="618.5" x2="780.5" y1="428.5313" y2="428.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="625.5" y="423.6748">Publish HTTPS(Request)</text><path d="M710,441.5313 L710,532.5313 L863,532.5313 L863,451.5313 L853,441.5313 L710,441.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M853,441.5313 L853,451.5313 L863,451.5313 L853,441.5313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="716" y="460.0264">Apacha Kafka</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="716" y="476.3779">RabbitMQ</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="716" y="492.7295">Amazon SQS</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="716" y="509.0811">Google Cloud Pub/Sub</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="716" y="525.4326">Azure Service Bus</text><polygon fill="#181818" points="955.5,556.6406,965.5,560.6406,955.5,564.6406,959.5,560.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="961.5" y1="560.6406" y2="560.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="793.5" y="555.7842">Subscribed HTTP(Request)</text><path d="M892,573.6406 L892,599.6406 L1043,599.6406 L1043,583.6406 L1033,573.6406 L892,573.6406 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1033,573.6406 L1033,583.6406 L1043,583.6406 L1033,573.6406 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="898" y="592.1357">Processes transaction</text><polygon fill="#181818" points="1627.5,623.3438,1637.5,627.3438,1627.5,631.3438,1631.5,627.3438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="967.5" x2="1633.5" y1="627.3438" y2="627.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="974.5" y="622.4873">Store transaction</text><polygon fill="#181818" points="1115.5,670.0469,1125.5,674.0469,1115.5,678.0469,1119.5,674.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="967.5" x2="1121.5" y1="674.0469" y2="674.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="974.5" y="652.8389">Transaction(tid, userid,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="974.5" y="669.1904">amount, merchant info)</text><polygon fill="#181818" points="1305.5,716.75,1315.5,720.75,1305.5,724.75,1309.5,720.75" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1127.5" x2="1311.5" y1="720.75" y2="720.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="1134.5" y="699.542">Transaction(tid=x, userid=y,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1134.5" y="715.8936">amount, merchantId=z)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="1359.5" y1="751.1016" y2="751.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="1359.5" x2="1359.5" y1="751.1016" y2="764.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="1318.5" x2="1359.5" y1="764.1016" y2="764.1016"/><polygon fill="#181818" points="1328.5,760.1016,1318.5,764.1016,1328.5,768.1016,1324.5,764.1016" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1324.5" y="746.2451">Calculate Cashback</text><path d="M1231,777.1016 L1231,852.1016 L1403,852.1016 L1403,787.1016 L1393,777.1016 L1231,777.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1393,777.1016 L1393,787.1016 L1403,787.1016 L1393,777.1016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151" x="1237" y="795.5967">Cashback may depend on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="1237" y="811.9482">1. User status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1237" y="828.2998">2.Current offers</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="1237" y="844.6514">3.Promotions</text><path d="M1240,862.5078 L1240,888.5078 L1395,888.5078 L1395,872.5078 L1385,862.5078 L1240,862.5078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1385,862.5078 L1385,872.5078 L1395,872.5078 L1385,862.5078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1246" y="881.0029">Get Transaction details</text><polygon fill="#181818" points="1627.5,928.5625,1637.5,932.5625,1627.5,936.5625,1631.5,932.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="1633.5" y1="932.5625" y2="932.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1324.5" y="911.3545">"SELECT * FROM transaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="1328.5" y="927.7061">WHERE userid=y"</text><polygon fill="#181818" points="1328.5,958.9141,1318.5,962.9141,1328.5,966.9141,1324.5,962.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1322.5" x2="1638.5" y1="962.9141" y2="962.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1334.5" y="958.0576">transaction info</text><path d="M1246,975.9141 L1246,1001.9141 L1388,1001.9141 L1388,985.9141 L1378,975.9141 L1246,975.9141 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1378,975.9141 L1378,985.9141 L1388,985.9141 L1378,975.9141 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1252" y="994.4092">Get Merchant details</text><polygon fill="#181818" points="1942.5,1041.9688,1952.5,1045.9688,1942.5,1049.9688,1946.5,1045.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="1948.5" y1="1045.9688" y2="1045.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1324.5" y="1024.7607">"SELECT * FROM merchant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="1328.5" y="1041.1123">WHERE merchant_id=z"</text><polygon fill="#181818" points="1328.5,1072.3203,1318.5,1076.3203,1328.5,1080.3203,1324.5,1076.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1322.5" x2="1953.5" y1="1076.3203" y2="1076.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1334.5" y="1071.4639">merchant info</text><path d="M1257,1089.3203 L1257,1131.3203 L1378,1131.3203 L1378,1099.3203 L1368,1089.3203 L1257,1089.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1368,1089.3203 L1368,1099.3203 L1378,1099.3203 L1368,1089.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="1263" y="1107.8154">Get Merchant</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1263" y="1124.167">Cashback details</text><polygon fill="#181818" points="1829.5,1188.0781,1839.5,1192.0781,1829.5,1196.0781,1833.5,1192.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="1835.5" y1="1192.0781" y2="1192.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="1324.5" y="1154.5186">"SELECT * FROM cashback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164" x="1328.5" y="1170.8701">WHERE merchant_id=z and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="1324.5" y="1187.2217">product=0"</text><polygon fill="#181818" points="1328.5,1218.4297,1318.5,1222.4297,1328.5,1226.4297,1324.5,1222.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1322.5" x2="1840.5" y1="1222.4297" y2="1222.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="1334.5" y="1217.5732">cashback</text><path d="M1250,1235.4297 L1250,1277.4297 L1385,1277.4297 L1385,1245.4297 L1375,1235.4297 L1250,1235.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1375,1235.4297 L1375,1245.4297 L1385,1245.4297 L1375,1235.4297 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1256" y="1253.9248">Calculate cashback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="1256" y="1270.2764">for transaction</text><path d="M1244,1288.1328 L1244,1330.1328 L1391,1330.1328 L1391,1298.1328 L1381,1288.1328 L1244,1288.1328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1381,1288.1328 L1381,1298.1328 L1391,1298.1328 L1381,1288.1328 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1250" y="1306.6279">Update usercashback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1250" y="1322.9795">in Cashback table</text><polygon fill="#181818" points="1829.5,1370.5391,1839.5,1374.5391,1829.5,1378.5391,1833.5,1374.5391" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="1835.5" y1="1374.5391" y2="1374.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="1324.5" y="1353.3311">"UPDATE TABLE cashback</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="1328.5" y="1369.6826">WHERE user=y.."</text><polygon fill="#181818" points="1328.5,1400.8906,1318.5,1404.8906,1328.5,1408.8906,1324.5,1404.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1322.5" x2="1840.5" y1="1404.8906" y2="1404.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="1334.5" y="1400.0342">200 OK</text><polygon fill="#181818" points="1480.5,1431.2422,1490.5,1435.2422,1480.5,1439.2422,1484.5,1435.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="1486.5" y1="1435.2422" y2="1435.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="1324.5" y="1430.3857">Data</text><path d="M1444,1448.2422 L1444,1474.2422 L1541,1474.2422 L1541,1458.2422 L1531,1448.2422 L1444,1448.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1531,1448.2422 L1531,1458.2422 L1541,1458.2422 L1531,1448.2422 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="76" x="1450" y="1466.7373">Analyze data</text><polygon fill="#181818" points="2065,1497.9453,2075,1501.9453,2065,1505.9453,2069,1501.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1317.5" x2="2071" y1="1501.9453" y2="1501.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27" x="1324.5" y="1497.0889">Data</text><polygon fill="#181818" points="33.5,1544.6484,23.5,1548.6484,33.5,1552.6484,29.5,1548.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.5" x2="2076" y1="1548.6484" y2="1548.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="39.5" y="1527.4404">Send Msg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="39.5" y="1543.792">Cashback</text><!--MD5=[8253f5160084f917a18276b12a6d3ecc]
@startuml

box "Customer" #LightGray
actor       User as user
participant App as app
end box

box "Common" #LightCyan
participant LoadBalancer as lb 
participant APIGateway as apigw
participant Validator as val
participant Kafka_Queue as q
end box

box "Business Logic" #LightBlue
participant Transaction_Processing_System as tps
participant Kafka as kafka
participant Cashback_Rules_Engine as cre
participant AnalyticsAndReporting as ana
end box

box "DataBase" #LightGreen
database TransactionTable as tdb
database UserTable as userdb
database CashbackTable as cbdb
database MerchantTable as merdb
end box

box "Payment_Gateway" #LightSkyBlue
participant PaymentGateway as pg
end box

user -> app: Make Purchase
app -> lb: HTTPS(Transaction details\n(tid, product-id,amnt,payment method))
lb -> apigw: HTTPS(request)
note over apigw: Provides Rate Limiting\nAuthentication\nRouting\nSecurity Functions

apigw -> val: HTTPS(request)
note over val: Provides Validation\nFormatting\nTranslation

val -> q: Publish HTTPS(Request)
note over q: Apacha Kafka\nRabbitMQ\nAmazon SQS\nGoogle Cloud Pub/Sub\nAzure Service Bus

q -> tps: Subscribed HTTP(Request)
note over tps: Processes transaction
tps -> tdb: Store transaction

tps -> kafka: Transaction(tid, userid, \namount, merchant info)
kafka -> cre: Transaction(tid=x, userid=y, \namount, merchantId=z)
cre -> cre: Calculate Cashback
note over cre: Cashback may depend on\n1. User status\n2.Current offers\n3.Promotions

note over cre: Get Transaction details
cre -> tdb: "SELECT * FROM transaction\n WHERE userid=y"
cre <- - tdb: transaction info

note over cre: Get Merchant details
cre -> merdb: "SELECT * FROM merchant\n WHERE merchant_id=z"
cre <- - merdb: merchant info

note over cre: Get Merchant\nCashback details
cre -> cbdb: "SELECT * FROM cashback\n WHERE merchant_id=z and \nproduct=0"
cre <- - cbdb: cashback

note over cre: Calculate cashback\nfor transaction
note over cre: Update usercashback\nin Cashback table
cre -> cbdb: "UPDATE TABLE cashback\n WHERE user=y.."
cre <- - cbdb: 200 OK

cre -> ana: Data
note over ana: Analyze data 

cre -> pg: Data
pg -> user: Send Msg\nCashback
@enduml

PlantUML version 1.2022.7(Mon Aug 22 22:31:30 IST 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>